---
description: Create a git commit with a descriptive message
allowed-tools: Bash, Read
model: sonnet
argument-hint: [optional: commit message]
---

# EA-Commit

## Purpose

Create a git commit with a properly formatted, descriptive message. Analyzes changes and generates a meaningful commit message if none provided.

## Variables

USER_MESSAGE: $ARGUMENTS

## Instructions

- Generate concise, descriptive commit messages
- Use present tense ("add", "fix", "update" not "added", "fixed")
- Keep subject line under 50 characters
- Use conventional format: `type: description`
- Don't include "Generated by..." or similar footer text

## Commit Types

| Type | When to Use |
|------|-------------|
| `feat` | New feature or functionality |
| `fix` | Bug fix |
| `docs` | Documentation changes |
| `style` | Formatting, no code change |
| `refactor` | Code restructuring |
| `test` | Adding or updating tests |
| `chore` | Maintenance, dependencies |

## Workflow

1. **Check for changes**
   - Run `git status` to see what's modified
   - If no changes, inform user and exit

2. **Analyze changes**
   - Run `git diff HEAD` to understand what changed
   - Identify the type of change (feat/fix/etc.)
   - Determine the main thing that changed

3. **Generate commit message**
   - If USER_MESSAGE provided, use it
   - Otherwise, generate based on changes
   - Format: `type: brief description`

4. **Stage and commit**
   - Run `git add -A` to stage all changes
   - Run `git commit -m "[message]"`

5. **Confirm success**
   - Show the commit hash
   - Ask if user wants to push

## Report

```
Commit Created

Hash: [short hash]
Message: [commit message]
Files: [count] changed

Changes:
- [file1]: [brief description]
- [file2]: [brief description]

Push to remote? Run: git push
```

## Examples

**Auto-generate commit message:**
```
/EA-commit
```

**Provide custom message:**
```
/EA-commit "feat: add user authentication"
```

**With type prefix:**
```
/EA-commit "fix: resolve login validation error"
```
